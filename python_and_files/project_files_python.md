## Введение в работу с файлами в Python

**Работа с файлами** — одна из ключевых тем в программировании, поскольку позволяет хранить, передавать и обрабатывать данные вне оперативной памяти компьютера. В этом уроке мы подробно разберем файловую систему Python и научимся эффективно работать с текстовыми файлами разных форматов.

---

### 1. Что такое файлы? Передача информации с помощью файлов

**Файл — это именованный участок памяти на диске, предназначенный для хранения данных**. 

Файлы могут содержать **текст**, **бинарные данные**, **изображения**, **видео** и многое другое. Они позволяют сохранять результаты работы программ и обмениваться данными между разными системами и пользователями.

В программировании файлы играют важную роль, например:
- **Хранение конфигурационных данных** — настройки программ, параметры запуска.
- **Запись логов** — фиксация действий программы для отладки и мониторинга.
- **Работа с базами данных** — хранение данных в структурированных форматах, таких как CSV или JSON.
- **Чтение и запись отчетов** — генерация файлов с результатами вычислений.

#### **Основные форматы файлов в Python**

Python позволяет работать с множеством форматов файлов, но наиболее распространены следующие:

1. **Текстовые файлы (`.txt`)** — содержат **обычный текст**, могут использовать кодировки UTF-8, ASCII и другие.
2. **CSV-файлы (`.csv`)** — представляют собой **таблицы, в которых данные хранятся в виде строк**, а столбцы разделены запятыми или другими символами-разделителями.
3. **JSON-файлы (`.json`)** — используются для хранения структурированных данных в формате, удобном для передачи между системами.

---

### 2. Открытие и закрытие файлов в Python

Работа с файлами начинается с их **открытия**. В Python это выполняется с помощью встроенной функции `open()`. Основной синтаксис:
```python
file = open("example.txt", "mode")
```
Где `mode` — это режим работы с файлом. 

Основные режимы:
- `'r'` (read) — **чтение** (по умолчанию). Файл должен существовать.
- `'w'` (write) — **запись**. Если файл существует, он **перезаписывается**.
- `'a'` (append) — **добавление данных в конец файла** без удаления старых данных.
- `'x'` (exclusive) — **создание нового файла**. Если файл уже существует, возникнет ошибка.
- `'b'` (binary) — **бинарный режим** (используется с `'r'`, `'w'`, `'a'`).
- `'t'` (text) — **текстовый режим** (по умолчанию).

После работы с файлом его необходимо **закрыть**, иначе могут возникнуть ошибки утечки ресурсов:
```python
file.close()
```

#### Важность закрытия файлов
Закрытие файла гарантирует, что:
- **Все данные были записаны корректно**.
- **Система освободила ресурсы, выделенные для работы с файлом**.
- **Другие процессы смогут получить доступ к файлу**.

Если программа завершится, не закрыв файл, это может привести к **потере данных**.

---

### 3. Чтение данных из файла

Python предоставляет три основных метода чтения файлов:

#### 1. `read()`: чтение всего содержимого файла
```python
file = open("example.txt", "r")
content = file.read()
print(content)
file.close()
```

#### 2. `readline()`: чтение одной строки за раз
```python
file = open("example.txt", "r")
line = file.readline()
print(line)
file.close()
```

#### 3. `readlines()`: чтение всех строк в список
```python
file = open("example.txt", "r")
lines = file.readlines()
print(lines)
file.close()
```

Каждый метод полезен в зависимости от задачи: если нужно обработать файл построчно — лучше использовать `readline()`, если весь файл сразу — `read()`.

---

### 4. Запись данных в файл

#### 1. `write()`: запись строки в файл
```python
file = open("example.txt", "w")
file.write("Привет, мир!\n")
file.close()
```

⚠ **Важно!** При открытии файла в режиме `'w'` весь его предыдущий контент **стирается**.

#### 2. `writelines()`: запись списка строк
```python
file = open("example.txt", "w")
file.writelines(["Строка 1\n", "Строка 2\n"])
file.close()
```

Для добавления данных в файл без удаления старых значений используйте режим `'a'` (append).

---

### 5. Контекстный менеджер (`with`)

Чтобы избежать ошибок, связанных с закрытием файла, используется контекстный менеджер `with`. 

Он автоматически закрывает файл после выхода из блока `with`, что предотвращает утечки ресурсов:

```python
with open("example.txt", "r") as file:
    content = file.read()
    print(content)
```

Преимущества использования `with`:
- Автоматическое закрытие файла.
- Чистый и понятный код.
- Меньший риск утечки памяти.

### Вопросы
1. Какие основные форматы файлов чаще всего используются в Python, и для каких целей они предназначены?
2. Как работает функция `open()`? Какие аргументы она принимает?
3. В чем разница между методами `read()`, `readline()` и `readlines()`?
4. Почему использование контекстного менеджера (`with open(...) as file:`) предпочтительнее, чем явное закрытие файла с помощью `close()`?
5. Что произойдет, если попытаться записать данные в файл, открытый в режиме `"r"` (только для чтения)?


### Задачи
1. Создайте текстовый файл `data.txt`, содержащий несколько строк текста. Напишите функцию, которая открывает этот файл и выводит его содержимое в консоль. Функция должна аргументом принимать адрес до файла `data.txt`.

2. Напишите программу, которая создает файл `output.txt` и записывает в него 5 строк текста, который пользователь будет вводить в консоль каждую с новой строки.

3. Напишите функцию, которая запрашивает у пользователя строку пока он не напишет `exit`, а затем записывает все строки (кроме exit) в файл `user_input.txt`, используя контекстный менеджер `with open(...)`.